___
计算机操作系统概述
===
参考资料：计算机操作系统（南京大学：骆斌、葛季栋）MOOC   
2020.08.21  
符燚
***

<!-- TOC -->

- [1. 基础](#1-基础)
    - [1.1. 计算机硬件](#11-计算机硬件)
    - [1.2. 计算机软件](#12-计算机软件)
    - [1.3. 操作系统](#13-操作系统)
    - [1.4. 操作系统的资源](#14-操作系统的资源)
        - [1.4.1. 屏蔽资源使用的底层细节](#141-屏蔽资源使用的底层细节)
        - [1.4.2. 资源共享与分配](#142-资源共享与分配)
        - [1.4.3. 程序控制](#143-程序控制)
        - [1.4.4. 计算机系统操作方式](#144-计算机系统操作方式)
        - [1.4.5. 操作系统的程序接口](#145-操作系统的程序接口)
        - [1.4.6. 操作系统内核](#146-操作系统内核)
- [2. 处理器管理](#2-处理器管理)

<!-- /TOC -->

# 1. 基础
* 计算机系统组成：硬件子系统、软件子系统
## 1.1. 计算机硬件
* 冯诺依曼计算机模型——存储程序计算机
    >* 以运算单元为中心，控制流由指令流产生
    >* 采用存储程序原理，面向主存组织数据流
    >* 主存是按地址访问、线性编址的空间
    >* 指令由操作码和地址码组成
    >* 数据以二进制编码
* 总线：按照传输的信息种类，包括：一组控制线、一组数据线和一组地址线。按类别还可分为内部总线、系统总线和通信总线。
    >* 内部总线：用于CPU芯片内部连接各元件
    >* 系统总线：用于连接CPU、存储器和各种I/O模块等主要部件
    >* 通信总线：用于计算机系统之间的通信
* 中央处理器（CPU）：是计算机的运算核心（Core）和控制核心（Cintrol Unit），主要包括：
    >* 运算逻辑部件：一个或多个运算器
    >* 寄存器部件：包括通用寄存器、控制与状态寄存器、以及高速缓冲存储器（Cache）
    >* 控制部件：
    >>* 实现各部件间联系的数据、控制及状态的内部总线
    >>* 负责对指令译码、发出为完成每条指令所要执行操作的控制信号、实现数据传输等功能的部件
* 外围设备及其控制
    >* 设备类型：输入设备、输出设备、存储设备、机机通信设备
    >* 设备控制方式：
    >>* 轮询方式：CPU忙式控制，CPU执行内存数据交换
    >>* 中断方式：CPU启动外设，外设中断CPU，CPU执行内存数据交换
    >>* DMA方式：CPU启动DMA，DMA执行输入输出与内存数据交换，DMA中断CPU（Direct Memory Access，直接存储器访问）
## 1.2. 计算机软件
* 三大组成部分：系统软件、支撑软件、应用软件
* 系统软件：操作系统、实用程序、语言处理程序、数据库管理系统
    >* 操作系统实施对各种软硬件资源的管理控制
    >* 实用程序为方便用户所设，如文本编辑等
    >* 语言处理程序把用汇编语言/高级语言编写的程序，翻译成可执行的机器语言程序
* 支撑软件：有接口软件、工具软件、环境数据库、支持用户使用计算机的环境，提供开发工具。也可认为是系统软件的一部分
* 应用软件：使用户按其需要自行编写的专用程序  
## 1.3. 操作系统
* 操作系统（Operating System），简称OS
* 组成：进程调度子系统、进程通信子系统、内存管理子系统、设备管理子系统、文件管理子系统、网络通信子系统、作业控制子系统
* 类型
    > 从操作控制方式  
    >* 多道批处理操作系统，采用脱机控制方式
    >* 分时操作系统，采用交互控制方式
    >* 实时操作系统 
     
    > 从应用领域
    >* 服务器操作系统、并行操作系统
    >* 网络操作系统、分布式操作系统
    >* 个人机操作系统、手机操作系统
    >* 嵌入式操作系统、传感器操作系统
## 1.4. 操作系统的资源
* 处理器资源、内存资源、设备资源、信息资源管理、信号量资源
### 1.4.1. 屏蔽资源使用的底层细节
* 驱动程序：最底层的、直接控制和监视各类硬件（或文件）资源的部分
* 职责是隐藏底层硬件的具体细节、并向其他部分提供一个抽象的、通用的接口
### 1.4.2. 资源共享与分配
* 资源共享方式
    >* 独占使用方式
    >* 并发使用方式
* 资源分配策略
    >* 静态分配方式
    >* 动态分配方式
    >* 资源独占方式
### 1.4.3. 程序控制
* 多道程序同时计算。CPU速度与I/O速度不匹配的矛盾。只有让多道程序同时进入内存争抢CPU运行，才可以使得CPU和外围设备充分并行，从而提高计算机系统的使用效率
* 多道程序设计：指让多个程序同时进入计算机的主存储器进行计算
* 多道程序设计的特点
    >* CPU与外围设备充分并行
    >* 外围设备之间充分并行
    >* 发挥CPU的使用效率
    >* 提高单位时间的算题量
* 进程：为进入内存执行的程序建立的管理实体
* OS能管理与控制进程程序的执行
* OS协调管理各类资源在进程间的使用
    >* 处理器的管理与调度
    >* 主存储器的管理和调度
    >* 其他资源的管理和调度
### 1.4.4. 计算机系统操作方式
* OS规定了合理操作计算机的工作流程
* OS的操作接口——系统程序  
OS提供给用户的功能级接口，为用户提供的解决操作计算机和计算共性问题的所有服务的集合
* 作业，是用户在一次计算过程中或者事务处理过程中，要求计算机所作工作的集合。
* 作业是不同相接的顺序步组成，这些作业步之间总是相互在时间和所占空间方面关联的。
* OS的两类作业级接口：
    >* 脱机作业控制方式：作业控制语句
    >* 联机作业控制方式：操作控制命令
* 脱机作业控制方式：
    >* OS：提供作业说明语言
    >* 用户：编写作业说明书，确定作业加工步骤，并与程序数据一并提交
    >* 操作员：通过控制台输入**作业**
    >* OS：通过作业控制程序自动控制作业的执行
    >* 例如：批处理OS的作业控制方式：UNIX的Shell程序、DOS的bat文件
* 联机作业控制方式
    >* 计算机：提供终端（键盘/显示器）
    >* 用户：登录系统
    >* 用户：联机输入命令，直接控制**作业步**的执行
    >* 例如：分时OS的交互控制方式
* 命令解释程序：接受和执行一条用户提出的对作业的加工处理命令
* 当一个新的批作业被启动，或新的交互型用户登录进系统时，系统就自动的执行命令解释程序，负责读入控制卡或命令行，做出相应的解释，并予以执行
* 命令解释程序的分类
    >* 会话语言：可编程的命令解释程序
    >* 图形化的命令控制方式
    >* 多通道交互的命令控制方式
* 命令解释程序的处理过程
    >* OS启动命令解释程序，输出命令提示符，等待键盘中断/鼠标点击/多通道识别
    >* 每当用户输入一条命令（暂存在命令缓冲区），并按回车换行时，申请中断
    >* CPU响应后，将控制权交给命令解释程序，接着读入命令缓冲区内容，分析命令、接收参数，执行处理代码
* 前台命令和后台命令
    >* 前台命令执行结束后，再次输出命令提示符，等待下一条命令
    >* 后台命令处理启动后，即可接收下条命令
### 1.4.5. 操作系统的程序接口
* 操作系统的程序接口——系统调用
* 操作系统提供的完成某种特定功能的过程。为所有运行程序提供访问操作系统的接口
* 系统调用的实现机制
    >* 陷入处理机制：计算机系统中控制和实现系统调用的机制
    >* 陷入指令：也称访管指令，或异常中断指令，计算机系统为实现系统调用而引起处理器中断的指令
    >* 每个系统调用都事先规定了编号，并在约定寄存器中规定了传递给内部处理程序的参数
    >* 编写系统调用处理程序
    >* 设计一张系统调用入口地址表，每个入口地址指向一个系统调用的处理程序，并包含系统调用自带参数的个数
    >* 陷入处理机制需开辟现场保护区，以保存发生系统调用时的处理器现场
### 1.4.6. 操作系统内核
* 单内核：内核中各部件杂然混居的形态。如Unix/Linux，及Windows（自称采用混合内核的CS结构）
* 微内核：强调结构性部件与功能性部件的分离
* 混合内核：微内核和单内核的折中，较多组件在核心态中运行
* 外内核：尽可能减少内核的软件抽象化和传统微内核的消息传递机制，使得开发者专注于硬件的抽象化；部分嵌入式系统使用

# 2. 处理器管理
